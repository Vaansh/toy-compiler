#! /usr/bin/python
# -*- coding: utf-8 -*-

from tests.ast_test import ast_test
from tests.generation_test import gen_test
from tests.lexer_test import lex_test
from tests.parser_test import syn_test
from tests.semantic_test import sem_test


class background:
    BLUE = "\033[94m"
    CRITICAL = "\033[91m"
    CYAN = "\033[96m"
    FIN = "\033[0m"
    GREEN = "\033[92m"
    PURPLE = "\033[95m"
    RED = "\033[91m"
    STRONG = "\033[1m"
    YELLOW = "\033[93m"


header = """\
  /$$$$$$$                      /$$$$$$                                  /$$                           /$$$$$$$$                    /$$             
| $$__  $$                    /$$__  $$                                |__/                          |__  $$__/                   | $$             
| $$  \ $$ /$$$$$$   /$$$$$$ | $$  \__//$$$$$$   /$$$$$$  /$$$$$$/$$$$  /$$ /$$$$$$$   /$$$$$$          | $$  /$$$$$$   /$$$$$$$ /$$$$$$   /$$$$$$$
| $$$$$$$//$$__  $$ /$$__  $$| $$$$   /$$__  $$ /$$__  $$| $$_  $$_  $$| $$| $$__  $$ /$$__  $$         | $$ /$$__  $$ /$$_____/|_  $$_/  /$$_____/
| $$____/| $$$$$$$$| $$  \__/| $$_/  | $$  \ $$| $$  \__/| $$ \ $$ \ $$| $$| $$  \ $$| $$  \ $$         | $$| $$$$$$$$|  $$$$$$   | $$   |  $$$$$$ 
| $$     | $$_____/| $$      | $$    | $$  | $$| $$      | $$ | $$ | $$| $$| $$  | $$| $$  | $$         | $$| $$_____/ \____  $$  | $$ /$$\____  $$
| $$     |  $$$$$$$| $$      | $$    |  $$$$$$/| $$      | $$ | $$ | $$| $$| $$  | $$|  $$$$$$$         | $$|  $$$$$$$ /$$$$$$$/  |  $$$$//$$$$$$$/
|__/      \_______/|__/      |__/     \______/ |__/      |__/ |__/ |__/|__/|__/  |__/ \____  $$         |__/ \_______/|_______/    \___/ |_______/ 
                                                                                      /$$  \ $$                                                    
                                                                                     |  $$$$$$/                                                    
                                                                                      \______/                                                     

"""


lex = """\
  /$$                           /$$                     /$$       /$$$$$$$$                    /$$             
| $$                          |__/                    | $$      |__  $$__/                   | $$             
| $$        /$$$$$$  /$$   /$$ /$$  /$$$$$$$  /$$$$$$ | $$         | $$  /$$$$$$   /$$$$$$$ /$$$$$$   /$$$$$$$
| $$       /$$__  $$|  $$ /$$/| $$ /$$_____/ |____  $$| $$         | $$ /$$__  $$ /$$_____/|_  $$_/  /$$_____/
| $$      | $$$$$$$$ \  $$$$/ | $$| $$        /$$$$$$$| $$         | $$| $$$$$$$$|  $$$$$$   | $$   |  $$$$$$ 
| $$      | $$_____/  >$$  $$ | $$| $$       /$$__  $$| $$         | $$| $$_____/ \____  $$  | $$ /$$\____  $$
| $$$$$$$$|  $$$$$$$ /$$/\  $$| $$|  $$$$$$$|  $$$$$$$| $$         | $$|  $$$$$$$ /$$$$$$$/  |  $$$$//$$$$$$$/
|________/ \_______/|__/  \__/|__/ \_______/ \_______/|__/         |__/ \_______/|_______/    \___/ |_______/ 
"""


syn = """\
  /$$$$$$                        /$$                           /$$     /$$                 /$$$$$$$$                    /$$             
 /$$__  $$                      | $$                          | $$    |__/                |__  $$__/                   | $$             
| $$  \__/ /$$   /$$ /$$$$$$$  /$$$$$$    /$$$$$$   /$$$$$$$ /$$$$$$   /$$  /$$$$$$$         | $$  /$$$$$$   /$$$$$$$ /$$$$$$   /$$$$$$$
|  $$$$$$ | $$  | $$| $$__  $$|_  $$_/   |____  $$ /$$_____/|_  $$_/  | $$ /$$_____/         | $$ /$$__  $$ /$$_____/|_  $$_/  /$$_____/
 \____  $$| $$  | $$| $$  \ $$  | $$      /$$$$$$$| $$        | $$    | $$| $$               | $$| $$$$$$$$|  $$$$$$   | $$   |  $$$$$$ 
 /$$  \ $$| $$  | $$| $$  | $$  | $$ /$$ /$$__  $$| $$        | $$ /$$| $$| $$               | $$| $$_____/ \____  $$  | $$ /$$\____  $$
|  $$$$$$/|  $$$$$$$| $$  | $$  |  $$$$/|  $$$$$$$|  $$$$$$$  |  $$$$/| $$|  $$$$$$$         | $$|  $$$$$$$ /$$$$$$$/  |  $$$$//$$$$$$$/
 \______/  \____  $$|__/  |__/   \___/   \_______/ \_______/   \___/  |__/ \_______/         |__/ \_______/|_______/    \___/ |_______/ 
           /$$  | $$                                                                                                                    
          |  $$$$$$/                                                                                                                    
           \______/         
"""


ast = """\
  /$$$$$$   /$$$$$$  /$$$$$$$$       /$$$$$$$$                    /$$             
 /$$__  $$ /$$__  $$|__  $$__/      |__  $$__/                   | $$             
| $$  \ $$| $$  \__/   | $$            | $$  /$$$$$$   /$$$$$$$ /$$$$$$   /$$$$$$$
| $$$$$$$$|  $$$$$$    | $$            | $$ /$$__  $$ /$$_____/|_  $$_/  /$$_____/
| $$__  $$ \____  $$   | $$            | $$| $$$$$$$$|  $$$$$$   | $$   |  $$$$$$ 
| $$  | $$ /$$  \ $$   | $$            | $$| $$_____/ \____  $$  | $$ /$$\____  $$
| $$  | $$|  $$$$$$/   | $$            | $$|  $$$$$$$ /$$$$$$$/  |  $$$$//$$$$$$$/
|__/  |__/ \______/    |__/            |__/ \_______/|_______/    \___/ |_______/ 
"""


sem = """\
  /$$$$$$                                                /$$     /$$                 /$$$$$$$$                    /$$             
 /$$__  $$                                              | $$    |__/                |__  $$__/                   | $$             
| $$  \__/  /$$$$$$  /$$$$$$/$$$$   /$$$$$$  /$$$$$$$  /$$$$$$   /$$  /$$$$$$$         | $$  /$$$$$$   /$$$$$$$ /$$$$$$   /$$$$$$$
|  $$$$$$  /$$__  $$| $$_  $$_  $$ |____  $$| $$__  $$|_  $$_/  | $$ /$$_____/         | $$ /$$__  $$ /$$_____/|_  $$_/  /$$_____/
 \____  $$| $$$$$$$$| $$ \ $$ \ $$  /$$$$$$$| $$  \ $$  | $$    | $$| $$               | $$| $$$$$$$$|  $$$$$$   | $$   |  $$$$$$ 
 /$$  \ $$| $$_____/| $$ | $$ | $$ /$$__  $$| $$  | $$  | $$ /$$| $$| $$               | $$| $$_____/ \____  $$  | $$ /$$\____  $$
|  $$$$$$/|  $$$$$$$| $$ | $$ | $$|  $$$$$$$| $$  | $$  |  $$$$/| $$|  $$$$$$$         | $$|  $$$$$$$ /$$$$$$$/  |  $$$$//$$$$$$$/
 \______/  \_______/|__/ |__/ |__/ \_______/|__/  |__/   \___/  |__/ \_______/         |__/ \_______/|_______/    \___/ |_______/ 
"""


gen = """\
  /$$$$$$                  /$$            /$$$$$$                            /$$$$$$$$                    /$$             
 /$$__  $$                | $$           /$$__  $$                          |__  $$__/                   | $$             
| $$  \__/  /$$$$$$   /$$$$$$$  /$$$$$$ | $$  \__/  /$$$$$$  /$$$$$$$          | $$  /$$$$$$   /$$$$$$$ /$$$$$$   /$$$$$$$
| $$       /$$__  $$ /$$__  $$ /$$__  $$| $$ /$$$$ /$$__  $$| $$__  $$         | $$ /$$__  $$ /$$_____/|_  $$_/  /$$_____/
| $$      | $$  \ $$| $$  | $$| $$$$$$$$| $$|_  $$| $$$$$$$$| $$  \ $$         | $$| $$$$$$$$|  $$$$$$   | $$   |  $$$$$$ 
| $$    $$| $$  | $$| $$  | $$| $$_____/| $$  \ $$| $$_____/| $$  | $$         | $$| $$_____/ \____  $$  | $$ /$$\____  $$
|  $$$$$$/|  $$$$$$/|  $$$$$$$|  $$$$$$$|  $$$$$$/|  $$$$$$$| $$  | $$         | $$|  $$$$$$$ /$$$$$$$/  |  $$$$//$$$$$$$/
 \______/  \______/  \_______/ \_______/ \______/  \_______/|__/  |__/         |__/ \_______/|_______/    \___/ |_______/ 
"""

footer = """"""

len_max = len(max((lex + syn + ast + sem + gen).splitlines(), key=len))


def final_demo():
    """Main method of the compiler."""
    format_line("=")
    run_lexical_tests()
    run_syntactic_tests()
    run_ast_tests()
    run_semantic_tests()
    run_codegen_tests()


def indicate_test_begin(s):
    print(s)


def format_line(s):
    print(s * len_max)


def indicate_test_over():
    format_line("=")


def run_lexical_tests():
    print(background.STRONG + background.BLUE)
    indicate_test_begin(lex)
    format_line("-")
    print(background.FIN)
    lex_test.lexer_test()
    indicate_test_over()


def run_syntactic_tests():
    print(background.STRONG + background.CYAN)
    indicate_test_begin(syn)
    format_line("-")
    print(background.FIN)
    syn_test.parser_test()
    indicate_test_over()


def run_ast_tests():
    print(background.STRONG + background.RED)
    indicate_test_begin(ast)
    format_line("-")
    print(background.FIN)
    ast_test.ast_test()
    indicate_test_over()


def run_semantic_tests():
    print(background.STRONG + background.PURPLE)
    indicate_test_begin(sem)
    format_line("-")
    print(background.FIN)
    sem_test.semantic_test()
    indicate_test_over()


def run_codegen_tests():
    print(background.STRONG + background.GREEN)
    indicate_test_begin(gen)
    format_line("-")
    print(background.FIN)
    gen_test.generation_test()
    indicate_test_over()


if __name__ == "__main__":
    final_demo()
